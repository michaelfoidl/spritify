name: restore-cache
description: 'Restores the files cached under the given artifact name'
inputs:
  artifact-key:
    description: 'Key of the artifact to restore'
    required: true
runs:
  using: 'composite'
  steps:
  - name: Initialize cache
    uses: actions/cache@v2
    with:
      key: ${{ inputs.artifact-key }}
      path: ~/.artifacts
  - name: Copy files from cache
    shell: bash
    run: |
      echo "::group::Copy files from cache"
      cp -r ~/.artifacts/* ${{ github.workspace }}
      echo "::endgroup::"
  - name: Debug
    shell: bash
    run: |
      echo "::group::Artifact content"
      find ~/.artifacts
      echo "::endgroup::"
      echo "::group::Workspace content"
      find ${{ github.workspace }}
      echo "::endgroup::"